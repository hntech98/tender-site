# Apache Virtual Host Configuration
# Place this file in: /etc/apache2/sites-available/tender-site.conf
# Enable with: sudo a2ensite tender-site.conf
# Reload Apache: sudo systemctl reload apache2

<VirtualHost *:80>
    # نام دامنه (تغییر دهید)
    ServerName tender.local
    ServerAlias www.tender.local
    
    # مسیر پروژه
    DocumentRoot /var/www/html/tender-site
    
    # تنظیمات دایرکتوری
    <Directory /var/www/html/tender-site>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # محافظت از فایل‌های حساس
        <FilesMatch "\.(htaccess|htpasswd|ini|log|sh|sql)$">
            Require all denied
        </FilesMatch>
    </Directory>
    
    # تنظیمات PHP
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>
    
    # افزایش محدودیت آپلود
    php_value upload_max_filesize 50M
    php_value post_max_size 50M
    php_value max_execution_time 300
    php_value memory_limit 256M
    
    # لاگ‌ها
    ErrorLog ${APACHE_LOG_DIR}/tender-error.log
    CustomLog ${APACHE_LOG_DIR}/tender-access.log combined
</VirtualHost>

# برای HTTPS (پس از نصب SSL)
# <VirtualHost *:443>
#     ServerName tender.local
#     DocumentRoot /var/www/html/tender-site
#     
#     SSLEngine on
#     SSLCertificateFile /etc/letsencrypt/live/tender.local/fullchain.pem
#     SSLCertificateKeyFile /etc/letsencrypt/live/tender.local/privkey.pem
#     
#     <Directory /var/www/html/tender-site>
#         Options Indexes FollowSymLinks
#         AllowOverride All
#         Require all granted
#     </Directory>
# </VirtualHost>
